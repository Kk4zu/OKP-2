<google-map
  [zoom]="zoom"
  [center]="center"
  [options]="options"
  [height]="height"
  [width]="width">

<map-marker #userLocationMarker *ngIf="userCurrentLocation"
  [position]="center"
  [options]="userMarkerOptions"
  [title]="userTitle">
</map-marker>

<div *ngIf="showActivitiesMarkers">
<map-marker #activityMarker="mapMarker"
  *ngFor="let activity of activityLocations; let i = index"
  [position]="{ lat: activity.position.lat + i * 0.001, lng: activity.position.lng + i * 0.001 }"
  [options]="activityMarkerOptions"
  [title]="activity.name"
  (mapClick)="openInfoWindow(activityMarker, activity)">
</map-marker>
</div>

<div *ngIf="showEventsMarkers">
<map-marker #eventMarker="mapMarker"
  *ngFor="let event of eventLocations; let i = index"
  [position]="{ lat: event.position.lat + i * 0.001, lng: event.position.lng + i * 0.001 }"
  [options]="eventMarkerOptions"
  [title]="event.name"
  (mapClick)="openInfoWindow(eventMarker, event)">
</map-marker>
</div>

<div *ngIf="showPlacesMarkers">
<map-marker #placeMarker="mapMarker"
  *ngFor="let place of placeLocations; let i = index"
  [position]="{ lat: place.position.lat + i * 0.001, lng: place.position.lng + i * 0.001 }"
  [options]="placeMarkerOptions"
  [title]="place.name"
  (mapClick)="openInfoWindow(placeMarker, place)">
</map-marker>
</div>

<map-info-window #infoWindow="mapInfoWindow"
  [options]="infoWindowOptions">
  <div class="container" *ngIf="selectedMarker">
    <h4>{{ selectedMarker.name }}</h4>
    <article class="text">
      <img src="{{ selectedMarker.image }}" alt="">
      <p>{{ selectedMarker.about }}</p>
      <p class="address">{{ selectedMarker.address.street_address }}, {{ selectedMarker.address.postal_code }}, {{ selectedMarker.address.city }}</p>
      <a href="{{ selectedMarker.url }}">Kotisivu</a>
      <p class="tags">Avainsanat: {{ selectedMarker.tags.join(', ') }}</p>
    </article>
  </div>
</map-info-window>

</google-map>